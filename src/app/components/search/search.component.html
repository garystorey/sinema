<div class="search-page">
  @if (recentSearches().length > 0 && !lastSearchQuery()) {
    <div class="search-header">
      <div class="recent-searches">
        <div class="recent-searches-header">
          <h3 class="recent-searches-title">RECENT SEARCHES</h3>
          <button class="clear-btn" (click)="clearRecentSearches()" aria-label="Clear recent searches">Clear</button>
        </div>
        <div class="recent-chips">
          @for (term of recentSearches(); track $index) {
            <button class="chip" (click)="searchRecent(term)">{{ term }}</button>
          }
        </div>
      </div>
    </div>
  }

  @if (results().length > 0) {
    <p class="results-count">Showing {{ totalResults() }} results for "{{ lastSearchQuery() }}"</p>
    <div class="results-grid">
      @for (movie of results(); track $index) {
        <app-moviecard [movie]="movie"></app-moviecard>
      }
    </div>

    @if (totalPages() > 1) {
      <nav class="pagination" aria-label="Search results pages">
        <button class="page-btn" (click)="prevPage()" [disabled]="currentPage() === 1" aria-label="Previous page">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <span class="page-info">Page {{ currentPage() }} of {{ totalPages() }}</span>
        <button class="page-btn" (click)="nextPage()" [disabled]="currentPage() === totalPages()" aria-label="Next page">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </nav>
    }
  } @else if (lastSearchQuery()) {
    <p class="no-results">No results found for "{{ lastSearchQuery() }}"</p>
  } @else if (!lastSearchQuery() && recentSearches().length === 0) {
    <div class="empty-state">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
      <h2 class="empty-state-title">Discover Movies</h2>
      <p class="empty-state-text">Use the search bar above to find your favorite movies, actors, and more.</p>
    </div>
  }
</div>
